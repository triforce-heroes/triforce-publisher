import{writeFileSync as e}from"node:fs";import{fatal as r}from"@triforce-heroes/triforce-core/Console";import{loadSourceDriver as o}from"../drivers/index.js";export async function PrepareCommand(s,t){let i=o(s);void 0===i&&r(`Unsupported source driver: ${s}`),process.stdout.write("Compiling entries... ");let n=await i.entries(t);for(let[r,o]of(process.stdout.write("OK\n"),process.stdout.write("Reassigning entries to locales... "),Object.entries(i.reassignLocales(n))))e(`entries_${r}.json`,JSON.stringify(o,null,2));process.stdout.write("OK\n"),process.stdout.write("\nDONE!")}